var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),(()=>{let e=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");globalThis.browser?.tabs||globalThis.chrome?.tabs;var t,r,n=(e,t)=>!t.__internal&&e.source===globalThis.window&&e.data.name===t.name&&(void 0===t.relayId||e.data.relayId===t.relayId),a=(t,r=globalThis.window)=>new Promise((a,o)=>{let s=e(),i=new AbortController;r.addEventListener("message",e=>{n(e,t)&&e.data.relayed&&e.data.instanceId===s&&(a(e.data.body),i.abort())},{signal:i.signal}),r.postMessage({...t,instanceId:s},{targetOrigin:t.targetOrigin||"/"})});(t=r||(r={})).ERROR="error",t.WARN="warn",t.INFO="info",t.DEBUG="debug";let o=r.INFO,s=()=>!1,i=()=>s()?o:r.DEBUG,l=e=>{let t=i();switch(t){case r.ERROR:return e===r.ERROR;case r.WARN:return e===r.ERROR||e===r.WARN;case r.INFO:return e===r.ERROR||e===r.WARN||e===r.INFO;case r.DEBUG:return!0;default:return!1}};class c{constructor(e="app"){this.context=e}formatMessage(e){return`[${this.context}] ${e}`}normalizeArgs(e){return e.map(e=>{if(e instanceof Error){let t={name:e.name,message:e.message,stack:e.stack},{cause:r}=e;for(let n of(void 0!==r&&(t.cause=r),Object.getOwnPropertyNames(e))){let r=e[n];n in t||void 0===r||(t[n]=r)}try{return JSON.stringify(t,null,2)}catch(e){return String(t)}}if("object"==typeof e&&null!==e&&"[object Object]"===Object.prototype.toString.call(e))try{return JSON.stringify(e,null,2)}catch(t){return String(e)}return e})}error(e,...t){l(r.ERROR)&&console.error(this.formatMessage(e),...this.normalizeArgs(t))}warn(e,...t){l(r.WARN)&&console.warn(this.formatMessage(e),...this.normalizeArgs(t))}info(e,...t){l(r.INFO)&&console.info(this.formatMessage(e),...this.normalizeArgs(t))}debug(e,...t){l(r.DEBUG)&&console.debug(this.formatMessage(e),...this.normalizeArgs(t))}log(e,...t){this.info(e,...t)}}let d=(e="app")=>new c(e);d();let g=d("event-main");g.info("[Injected] Script loaded"),window.frontrunEvent={requestAction:async function(e,t){g.info("[Injected] Sending request:",e,t);try{let r=await a({name:"event",body:{action:e,params:t}});if(g.info("[Injected] Received response:",r),r.error)throw Error(r.error);return r.result}catch(e){throw g.error("[Injected] Request failed:",e),e}}},g.info("[Injected] window.frontrunEvent API injected")})(),globalThis.define=t;