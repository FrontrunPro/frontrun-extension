var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),(()=>{function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t,r,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},o=n.parcelRequiref356;null==o&&((o=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},n.parcelRequiref356=o),o.register("7S1wr",function(t,r){e(t.exports,"LogBuffer",()=>n),e(t.exports,"logBuffer",()=>i);class n{constructor(e=1e3){this.head=0,this.count=0,this.maxSize=e,this.buffer=Array(e)}push(e){let t=(this.head+this.count)%this.maxSize;this.count<this.maxSize?this.count++:this.head=(this.head+1)%this.maxSize,this.buffer[t]=e}getAll(){let e=[];for(let t=0;t<this.count;t++){let r=(this.head+t)%this.maxSize,n=this.buffer[r];n&&e.push(n)}return e}size(){return this.count}clear(){this.buffer=Array(this.maxSize),this.head=0,this.count=0}clearOldest(e){if(!(e<=0)){if(e>=this.count){this.clear();return}for(let t=0;t<e;t++){let e=(this.head+t)%this.maxSize;this.buffer[e]=void 0}this.head=(this.head+e)%this.maxSize,this.count-=e}}isEmpty(){return 0===this.count}isFull(){return this.count>=this.maxSize}}let i=new n(1e3)});let a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");globalThis.browser?.tabs||globalThis.chrome?.tabs;var l=()=>{let e=globalThis.browser?.runtime||globalThis.chrome?.runtime;if(!e)throw Error("Extension runtime is not available");return e},u=(e,t)=>!t.__internal&&e.source===globalThis.window&&e.data.name===t.name&&(void 0===t.relayId||e.data.relayId===t.relayId),f=async e=>l().sendMessage(e.extensionId??null,e),c=(e,t=globalThis.window)=>new Promise((r,n)=>{let i=a(),s=new AbortController;t.addEventListener("message",t=>{u(t,e)&&t.data.relayed&&t.data.instanceId===i&&(r(t.data.body),s.abort())},{signal:s.signal}),t.postMessage({...e,instanceId:i},{targetOrigin:e.targetOrigin||"/"})});let h=null,d=()=>{if(null===h&&R()){let{logBuffer:e}=o("7S1wr");h=e}return h};(t=r||(r={})).ERROR="error",t.WARN="warn",t.INFO="info",t.DEBUG="debug";let g=()=>{if("undefined"!=typeof window)return!1;let e=globalThis;return!!(e.registration&&e.clients)},m=r.INFO,b=()=>!1,p=()=>b()?m:r.DEBUG,w=e=>{let t=p();switch(t){case r.ERROR:return e===r.ERROR;case r.WARN:return e===r.ERROR||e===r.WARN;case r.INFO:return e===r.ERROR||e===r.WARN||e===r.INFO;case r.DEBUG:return!0;default:return!1}},y=null,R=()=>(null===y&&(y=g()),y);class O{constructor(e="app"){this.context=e}formatMessage(e){return`[${this.context}] ${e}`}bufferLog(e,t,r){let n={timestamp:Date.now(),level:e,context:this.context,message:t,args:r.map(e=>{if(e instanceof Error)return{__type:"Error",name:e.name,message:e.message,stack:e.stack,cause:e.cause};if("object"==typeof e&&null!==e)try{return JSON.parse(JSON.stringify(e))}catch{return String(e)}return e})};if(R()){let e=d();e&&e.push(n)}else f({name:"forwardLog",body:{entry:n}}).catch(()=>{})}normalizeArgs(e){return e.map(e=>{if(e instanceof Error){let t={name:e.name,message:e.message,stack:e.stack},{cause:r}=e;for(let n of(void 0!==r&&(t.cause=r),Object.getOwnPropertyNames(e))){let r=e[n];n in t||void 0===r||(t[n]=r)}try{return JSON.stringify(t,null,2)}catch(e){return String(t)}}if("object"==typeof e&&null!==e&&"[object Object]"===Object.prototype.toString.call(e))try{return JSON.stringify(e,null,2)}catch(t){return String(e)}return e})}error(e,...t){this.bufferLog("error",e,t),w(r.ERROR)&&console.error(this.formatMessage(e),...this.normalizeArgs(t))}warn(e,...t){this.bufferLog("warn",e,t),w(r.WARN)&&console.warn(this.formatMessage(e),...this.normalizeArgs(t))}info(e,...t){this.bufferLog("info",e,t),w(r.INFO)&&console.info(this.formatMessage(e),...this.normalizeArgs(t))}debug(e,...t){this.bufferLog("debug",e,t),w(r.DEBUG)&&console.debug(this.formatMessage(e),...this.normalizeArgs(t))}log(e,...t){this.info(e,...t)}}let S=(e="app")=>new O(e);S();let x=S("event-main");x.info("[Injected] Script loaded"),window.frontrunEvent={requestAction:async function(e,t){x.info("[Injected] Sending request:",e,t);try{let r=await c({name:"event",body:{action:e,params:t}});if(x.info("[Injected] Received response:",r),r.error)throw Error(r.error);return r.result}catch(e){throw x.error("[Injected] Request failed:",e),e}}},x.info("[Injected] window.frontrunEvent API injected")})(),globalThis.define=t;